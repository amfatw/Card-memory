!function(){"use strict";var e={293:function(e,t,s){var i=s(623),o=s(695),n=s(291),r=s(344),a=s(444),c=s(74),d=s(834),l=s(139),u=s(554);a.x.show(),o._.addImagesLoadListener(),document.addEventListener("imagesLoaded",(function(){a.x.hide(),c.d.show()})),o._.getImages().then(o._.prepareImages).then(o._.placeImages),c.d.block.addEventListener("pointerdown",(function(e){let t=e.target.closest(".mode-select__option");if(!t)return;let s=t.dataset.mode;c.d.set(s),l.A.update(),o._.updateAmmount(),o._.shuffleCards(),c.d.hide(),i.H.show(),o._.fixFirstViewLag(.1),o._.showAll(.5,i.H.pairs)})),o._.cardsList.addEventListener("pointerdown",(function(e){let t=e.target.closest(".card");if(t&&!t.classList.contains("selected")&&!t.classList.contains("found")){if(t.classList.remove("flip-back"),t.classList.add("flip"),t.classList.add("selected"),i.H.firstSelectedCard)return i.H.secondSelectedCard=t,i.H.compare()?(i.H.markFoundCards(),i.H.minusPair(),i.H.clearSelection(),void(i.H.checkPairs()&&n.q.show("win"))):i.H.compare()?void 0:(i.H.flipSelected(),i.H.clearSelection(),i.H.minusTry(),l.A.update(),void(i.H.checkTries()&&n.q.show("lose")));i.H.firstSelectedCard=t}})),document.querySelector(".new-cards-button").addEventListener("pointerdown",(function(){a.x.show(),o._.sortToStart(),o._.getImages().then(o._.prepareImages).then(o._.placeImages),i.H.hide(),n.q.hide()})),document.querySelector(".new-game-button").addEventListener("pointerdown",(function(){i.H.hide(),n.q.hide(),o._.sortToStart(),o._.shuffleImages().then(o._.prepareImages).then(o._.placeImages),c.d.show()})),u.u.link.addEventListener("pointerdown",(function(e){e.preventDefault(),u.u.toggleBlockDisplay()})),u.u.block.addEventListener("pointerdown",(function(e){let t=e.target;(t.classList.contains("info")||t.classList.contains("info__close-button"))&&u.u.toggleBlockDisplay()})),r.g.loadSong(),r.g.audio.addEventListener("ended",(function(){r.g.nextSong(),r.g.loadSong(),r.g.play()})),r.g.button.addEventListener("pointerdown",(function(){let e=r.g.button;return e.classList.contains("music-switcher--pause")?(e.classList.remove("music-switcher--pause"),e.classList.add("music-switcher--play"),void r.g.play()):e.classList.contains("music-switcher--play")?(e.classList.remove("music-switcher--play"),e.classList.add("music-switcher--pause"),void r.g.pause()):void 0})),d.C.block.addEventListener("pointerdown",(function(){d.C.switch()}))},695:function(e,t,s){s.d(t,{_:function(){return o}});var i=s(623);const o={images:[],preparedImages:[],cards:Array.from(document.querySelectorAll(".card")),cardsList:document.querySelector(".cards-list"),imagesBlocks:document.querySelectorAll(".card__front"),getImages:async function(e=8){let t=await fetch("https://api.waifu.im/search/?many=true&gif=false&orientation=PORTRAIT",{headers:{"Accept-Version":"v4"}});t.ok||alert("Ошибка HTTP: "+t.status);let s=(await t.json()).images.filter((e=>".jpeg"===e.extension||".jpg"===e.extension)).sort(((e,t)=>e.height-t.height)).slice(0,e);this.images=s.length>=e?s:this.getImages()},prepareImages:async function(){let e=[];for(let t of this.images)e.push(t),e.push(t);this.preparedImages=e},placeImages:async function(){let e=0;for(let t of this.cards)t.querySelector(".card__front").src=this.preparedImages[e].url,e++},shuffleImages:async function(){let e=Array.from(this.images);for(let t=e.length-1;t>0;t--){let s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}this.images=e},shuffleCards:function(){let e=Array.from(this.cards);for(let t=e.filter((e=>e.dataset.number<=i.H.pairs)).length-1;t>0;t--){let s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}this.cardsList.append(...e)},sortToStart:function(){let e=this.cards;for(let t of e)t.classList.remove("flip"),t.classList.remove("flip-back");let t=e.sort(((e,t)=>e.dataset.number>t.dataset.number?1:-1));this.cardsList.append(...t)},showAll:function(e=.5,t=5){for(let e of this.cards)e.classList.add("found");setTimeout((()=>{for(let e of this.cards)e.classList.add("flip");setTimeout((()=>{for(let e of this.cards)e.classList.remove("flip"),e.classList.add("flip-back"),e.classList.remove("found"),setTimeout((()=>{e.classList.remove("flip-back")}),1e3)}),1e3*Math.ceil(t/2))}),1e3*e)},updateAmmount:function(){i.H.block.classList.remove("cards-6","cards-10","cards-16"),i.H.block.classList.add("cards-"+2*i.H.pairs)},addImagesLoadListener:function(){let e=this.imagesBlocks,t=0;for(let s of e)s.onload=function(){if(t++,t==e.length){let e=new Event("imagesLoaded",{bubbles:!0});o.cardsList.dispatchEvent(e),t=0}}},fixFirstViewLag:function(e=.5){let t=this.imagesBlocks;for(let s of t)s.style.transform="rotateY(0deg)",setTimeout((()=>{s.style.transform="rotateY(180deg)"}),1e3*e)}};for(let e in o)"function"==typeof o[e]&&(o[e]=o[e].bind(o))},623:function(e,t,s){s.d(t,{H:function(){return i}});let i={pairs:void 0,tries:void 0,firstSelectedCard:void 0,secondSelectedCard:void 0,block:document.querySelector(".game"),show:function(){this.block.classList.add("display")},hide:function(){this.block.classList.remove("display")},compare:function(){return this.firstSelectedCard.dataset.number==this.secondSelectedCard.dataset.number},minusTry:function(){this.tries--},minusPair:function(){this.pairs--},checkTries:function(){return this.tries<=0},checkPairs:function(){return this.pairs<=0},markFoundCards:function(){i.firstSelectedCard.classList.add("found"),i.secondSelectedCard.classList.add("found")},flipSelected:function(){let e=this.firstSelectedCard,t=this.secondSelectedCard;setTimeout((()=>{e.classList.remove("flip"),e.classList.add("flip-back"),t.classList.remove("flip"),t.classList.add("flip-back")}),1500)},clearSelection:function(){this.firstSelectedCard.classList.remove("selected"),this.secondSelectedCard.classList.remove("selected"),this.firstSelectedCard=void 0,this.secondSelectedCard=void 0}};for(let e in i)"function"==typeof i[e]&&(i[e]=i[e].bind(i))},554:function(e,t,s){s.d(t,{u:function(){return i}});const i={link:document.querySelector(".info-link"),block:document.querySelector(".info"),toggleBlockDisplay:function(){this.block.classList.toggle("display")}};for(let e in i)"function"==typeof i[e]&&(i[e]=i[e].bind(i))},74:function(e,t,s){s.d(t,{d:function(){return o}});var i=s(623);const o={block:document.querySelector(".mode-select"),show:function(){this.block.classList.add("display")},hide:function(){this.block.classList.remove("display")},set:function(e){switch(e){case"1":i.H.pairs=3,i.H.tries=2;break;case"2":i.H.pairs=5,i.H.tries=5;break;case"3":i.H.pairs=8,i.H.tries=8}}};for(let e in o)"function"==typeof o[e]&&(o[e]=o[e].bind(o))},344:function(e,t,s){s.d(t,{g:function(){return i}});let i={songs:["Chirrrex-China.mp3","ColorfulCat-Rurikon.mp3","ColorfulCat-Love.mp3"],path:"./music/",songIndex:0,audio:document.querySelector("audio"),button:document.querySelector(".music-switcher"),loadSong:function(e=this.songIndex){let t=this.songs[e];this.audio.src=`${this.path+t}`},play:function(){this.audio.play()},pause:function(){this.audio.pause()},nextSong:function(){this.songIndex++,this.songIndex>=this.songs.length&&(this.songIndex=0)}};for(let e in i)"function"==typeof i[e]&&(i[e]=i[e].bind(i))},444:function(e,t,s){s.d(t,{x:function(){return i}});const i={preloaderBlock:document.querySelector(".preloader"),show:function(){this.preloaderBlock.classList.add("display")},hide:function(){this.preloaderBlock.classList.remove("display")}};for(let e in i)"function"==typeof i[e]&&(i[e]=i[e].bind(i))},291:function(e,t,s){s.d(t,{q:function(){return o}});var i=s(695);const o={block:document.querySelector(".game-result"),show:function(e){for(let e of i._.cards)e.classList.add("found");setTimeout((()=>{this.block.classList.add(`${e}`),this.block.classList.add("display");for(let e of i._.cards)e.classList.remove("found")}),2e3)},hide:function(){this.block.classList.remove("display","win","lose")}};for(let e in o)"function"==typeof o[e]&&(o[e]=o[e].bind(o))},834:function(e,t,s){s.d(t,{C:function(){return i}});const i={block:document.querySelector(".theme-switcher"),switch:function(){document.body.classList.toggle("dark-theme")}}},139:function(e,t,s){s.d(t,{A:function(){return o}});var i=s(623);const o={block:document.querySelector(".tries-counter"),update:function(){this.block.textContent=i.H.tries}};for(let e in o)"function"==typeof o[e]&&(o[e]=o[e].bind(o))}},t={};function s(i){var o=t[i];if(void 0!==o)return o.exports;var n=t[i]={exports:{}};return e[i](n,n.exports,s),n.exports}s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s(293),s(695),s(623),s(554),s(74),s(344),s(444),s(291),s(834),s(139)}();